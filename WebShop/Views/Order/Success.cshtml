@model Domain.Entities.HoaDon
@{
    ViewData["Title"] = "ƒê·∫∑t h√†ng th√†nh c√¥ng";
}

<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <!-- Success Message -->
            <div class="text-center mb-4">
                <div class="mb-3">
                    <i class="bi bi-check-circle-fill text-success" style="font-size: 5rem;"></i>
                </div>
                <h2 class="fw-bold text-success">ƒê·∫∑t h√†ng th√†nh c√¥ng! üéâ</h2>
                <p class="text-muted">C·∫£m ∆°n b·∫°n ƒë√£ mua h√†ng t·∫°i Mini Market</p>
            </div>

            <!-- Order Info Card -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">
                        <i class="bi bi-receipt"></i> Th√¥ng tin ƒë∆°n h√†ng
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <p class="mb-1"><strong>M√£ ƒë∆°n h√†ng:</strong></p>
                            <p class="text-primary fs-4">#@Model.MaHD</p>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Ng√†y ƒë·∫∑t:</strong></p>
                            <p>@Model.NgayDat.ToString("dd/MM/yyyy HH:mm")</p>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Tr·∫°ng th√°i:</strong></p>
                            <span class="badge bg-warning">@Model.Status</span>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Thanh to√°n:</strong></p>
                            <span class="badge bg-@(Model.PaymentTransaction?.Status == "Completed" ? "success" : "warning")">
                                @Model.PaymentTransaction?.Status
                            </span>
                        </div>
                    </div>

                    <hr />

                    <div class="row">
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Ng∆∞·ªùi nh·∫≠n:</strong></p>
                            <p>@Model.User?.HoTen</p>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-1"><strong>S·ªë ƒëi·ªán tho·∫°i:</strong></p>
                            <p>@Model.SoDienThoai</p>
                        </div>
                    </div>

                    <div class="mb-3">
                        <p class="mb-1"><strong>ƒê·ªãa ch·ªâ giao h√†ng:</strong></p>
                        <p class="text-muted">@Model.DiaChiGiao</p>
                    </div>

                    @if (!string.IsNullOrEmpty(Model.GhiChu))
                    {
                        <div class="mb-3">
                            <p class="mb-1"><strong>Ghi ch√∫:</strong></p>
                            <p class="text-muted">@Model.GhiChu</p>
                        </div>
                    }
                </div>
            </div>

            <!-- Order Items -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-white">
                    <h5 class="mb-0">
                        <i class="bi bi-bag-check"></i> Chi ti·∫øt s·∫£n ph·∫©m
                    </h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>S·∫£n ph·∫©m</th>
                                    <th class="text-center">S·ªë l∆∞·ª£ng</th>
                                    <th class="text-end">ƒê∆°n gi√°</th>
                                    <th class="text-end">Gi·∫£m gi√°</th>
                                    <th class="text-end">Th√†nh ti·ªÅn</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (Model.ChiTietHDs != null)
                                {
                                    foreach (var item in Model.ChiTietHDs)
                                    {
                                        <tr>
                                            <td>
                                                <strong>@item.HangHoa?.TenHH</strong>
                                            </td>
                                            <td class="text-center">@item.SoLuong</td>
                                            <td class="text-end">@item.DonGia.ToString("#,##0") ƒë</td>
                                            <td class="text-end text-danger">-@item.GiamGia.ToString("#,##0") ƒë</td>
                                            <td class="text-end"><strong>@item.ThanhTien.ToString("#,##0") ƒë</strong></td>
                                        </tr>
                                    }
                                }
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td colspan="4" class="text-end"><strong>T·∫°m t√≠nh:</strong></td>
                                    <td class="text-end">
                                        @((Model.TongTien - Model.PhiVanChuyen).ToString("#,##0")) ƒë
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="4" class="text-end"><strong>Ph√≠ v·∫≠n chuy·ªÉn:</strong></td>
                                    <td class="text-end">@Model.PhiVanChuyen.ToString("#,##0") ƒë</td>
                                </tr>
                                <tr class="table-success">
                                    <td colspan="4" class="text-end"><strong class="fs-5">T·ªïng c·ªông:</strong></td>
                                    <td class="text-end"><strong class="fs-5 text-success">@Model.TongTien.ToString("#,##0") ƒë</strong></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Payment Method -->
            <div class="card shadow-sm mb-4">
                <div class="card-body">
                    <h6><i class="bi bi-credit-card"></i> Ph∆∞∆°ng th·ª©c thanh to√°n</h6>
                    <p class="mb-0">
                        <span class="badge bg-info">@Model.PaymentTransaction?.PhuongThucTT</span>
                    </p>
                </div>
            </div>

            <!-- Actions -->
            <div class="card shadow-sm">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <a asp-controller="Order" asp-action="History" class="btn btn-outline-primary">
                                <i class="bi bi-clock-history"></i> Xem l·ªãch s·ª≠ ƒë∆°n h√†ng
                            </a>
                            <a asp-controller="Home" asp-action="Index" class="btn btn-outline-secondary">
                                <i class="bi bi-house"></i> Ti·∫øp t·ª•c mua s·∫Øm
                            </a>
                        </div>
                        <div>
                            <a asp-controller="Order" asp-action="Details" asp-route-id="@Model.MaHD" class="btn btn-primary">
                                <i class="bi bi-eye"></i> Xem chi ti·∫øt
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Next Steps -->
            <div class="alert alert-info mt-4">
                <h6><i class="bi bi-info-circle"></i> B∆∞·ªõc ti·∫øp theo:</h6>
                <ul class="mb-0">
                    <li>Ch√∫ng t√¥i s·∫Ω x√°c nh·∫≠n ƒë∆°n h√†ng c·ªßa b·∫°n trong th·ªùi gian s·ªõm nh·∫•t</li>
                    <li>B·∫°n s·∫Ω nh·∫≠n ƒë∆∞·ª£c email x√°c nh·∫≠n ƒë∆°n h√†ng</li>
                    <li>Theo d√µi tr·∫°ng th√°i ƒë∆°n h√†ng t·∫°i m·ª•c "ƒê∆°n h√†ng c·ªßa t√¥i"</li>
                    @if (Model.PaymentTransaction?.PhuongThucTT == "COD")
                    {
                        <li>Thanh to√°n b·∫±ng ti·ªÅn m·∫∑t khi nh·∫≠n h√†ng</li>
                    }
                </ul>
            </div>
        </div>
    </div>
</div>

<style>
    .text-success {
        color: #28a745 !important;
    }
    
    .card {
        border: none;
    }
    
    .table td, .table th {
        padding: 1rem;
        vertical-align: middle;
    }
</style>

